

영단어 분야 분류 파이프라인

1. 데이터 추출 (Data Fetching)
가장 먼저 분류되지 않은 단어들을 DB에서 가져옵니다. 한 번에 1개씩 하면 너무 느리므로, 보통 50~100개씩 묶어서(Batch) 가져옴

데이터베이스 : 분야 컬럼이 NULL인 데이터만 조회합니다.

핵심: 단어(Word)와 뜻(Meaning)을 반드시 가져와야 함
 반드시 같이 가져와야 합니다. (동음이의어 구분을 위해 필수)

2. 문맥 조립 (Context Assembly)
AI에게 넘겨주기 전에, AI가 이해하기 쉬운 형태의 문장(Prompt)으로 데이터를 가공

예) 입력 데이터:
단어: Cookie
뜻: A small file stored on a user's computer by the web server.


AI에게 보낼 프롬프트 조립
"단어 'Cookie'의 뜻은 '웹 서버가 컴퓨터에 저장하는 파일'이고, 이 단어는 [IT, 요리, 패션] 중 어디에 속해?" 라고 물어보는 프롬프트
단, 이때
 AI에게 "알아서 분류해줘"라고 하면  '운동', '스포츠', '체육', 'Activity' 등 제각각인 결과를 내놓아서 나중에 데이터를 쓸 수 없게 되는 문제가 100% 발생

이 문제를 해결하기 위해 AI 엔지니어링에서는 "프롬프트 제약(Prompt Constraints)" 또는 "화이트리스트(White-list) 분류" 방식을 사용 -> 
  "IT/Tech",          # 컴퓨터, 인터넷, 기술
    "Business",         # 경제, 경영, 회사
    "Sports",           # 야구, 농구, 올림픽
    "Medical",          # 의학, 병원, 신체
    "Politics",         # 정치, 법률
    "Arts",             # 미술, 음악, 영화
    "Science",          # 과학, 우주, 화학
    "Food",             # 요리, 식재료
    "Daily Life",       # 일상 대화, 감정, 인사 (예: Hello, Happy, Sleep)
    "Structural / Abstract" # 부사, 접속사, 전치사, 특정 분야 없는 일반 동사/형용사 (예: Therefore, Quickly, Exist)

이런식으로 분야를 미리 지정하여 gpt에서 고르도록 하는 방식 적용이 합리적임

그후. DB 저장 (Update)
최종 확정된 카테고리를 오라클 DB에 저장


소설 스토리 생성 파이프라인

WRONG_WORD 테이블에서 해당 유저의 단어 중 아직 스토리에 안 쓰인(is_used_in_story = 'N') 단어를 5개~10개 가져옵니다.
->
AI 소설 생성 (API Call)
가져온 단어 리스트([Apple, Galaxy, Algorithm...])를 주고 OpenAI에게 소설 생성을 요청합니다.
->
스토리 저장 (INSERT)
생성된 소설 내용과 함께, 사용한 단어 ID 목록을 JSON 문자열로 변환하여 STORY 테이블에 저장합니다.
예 : target_vocab_ids: "[101, 102, 105, 108, 110]"
->
사용 처리 (UPDATE)
재료로 쓴 WRONG_WORD들의 상태를 **'사용됨(Y)'**으로 변경